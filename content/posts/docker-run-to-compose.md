---
title: "Docker Run å‘½ä»¤ä¸€é”®è½¬ Docker Composeï¼šè¿ç»´æ•ˆç‡æå‡ç¥å™¨"
date: 2026-01-09T10:00:00+08:00
draft: false
tags: ["Docker", "è¿ç»´", "æ•ˆç‡å·¥å…·"]
categories: ["è¿ç»´æ•™ç¨‹"]
author: "888467"
description: "è¯¦è§£å¦‚ä½•å°†å¤æ‚çš„ Docker Run å‘½ä»¤å¿«é€Ÿè½¬æ¢ä¸º Docker Compose YAML æ–‡ä»¶ï¼Œæå‡è¿ç»´æ•ˆç‡ã€‚"
slug: docker-run-to-compose
---

å¯¹äºå¾ˆå¤šåˆšåˆšæ¥è§¦ Docker æˆ–è€…ä¹ æƒ¯äº†å‘½ä»¤è¡Œçš„å¼€å‘è€…æ¥è¯´ï¼Œç®¡ç†é‚£äº›è¶Šæ¥è¶Šé•¿çš„ `docker run` å¯åŠ¨å‘½ä»¤ç®€ç›´æ˜¯ä¸€åœºå™©æ¢¦ã€‚

ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›æƒ…å†µï¼š
* æµ‹è¯•ç¯å¢ƒéƒ¨ç½²å¥½çš„å®¹å™¨ï¼Œè¿‡å‡ å¤©æƒ³è¿ç§»åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œå´**å¿˜è®°äº†å½“æ—¶æ•²äº†å“ªäº›å‚æ•°**ï¼Ÿ
* ä¸€æ¡å¯åŠ¨å‘½ä»¤åŒ…å«äº†ç«¯å£æ˜ å°„ã€ç¯å¢ƒå˜é‡ã€æŒ‚è½½å·ï¼Œé•¿åº¦è¶…è¿‡äº† 3 è¡Œï¼Œ**æ¯æ¬¡ä¿®æ”¹éƒ½å°å¿ƒç¿¼ç¿¼**ï¼Ÿ
* æƒ³æŠŠå‡ ä¸ªå®¹å™¨ç¼–æ’åœ¨ä¸€èµ·ï¼Œå´å‘ç°**æ‰‹åŠ¨å†™ YAML æ–‡ä»¶æ ¼å¼æ€»æ˜¯æŠ¥é”™**ï¼Ÿ

å¦‚æœä½ è¢«è¿™äº›é—®é¢˜å›°æ‰°ï¼Œé‚£ä¹ˆ **Docker Compose** å°±æ˜¯ä½ çš„æ•‘æ˜Ÿï¼Œè€Œæˆ‘ä»¬æä¾›çš„åœ¨çº¿è½¬æ¢å·¥å…·èƒ½å¸®ä½ ä¸€é”®è§£å†³çƒ¦æ¼ã€‚

## ä¸ºä»€ä¹ˆè¦ç”¨ Docker Composeï¼Ÿ

`docker run` å‘½ä»¤æ˜¯å‘½ä»¤å¼çš„ï¼ˆImperativeï¼‰ï¼Œä½ æ•²ä»€ä¹ˆå®ƒæ‰§è¡Œä»€ä¹ˆï¼Œæ‰§è¡Œå®Œå°±â€œéšé£è€Œå»â€äº†ï¼Œå¾ˆéš¾å¤ç”¨å’Œç‰ˆæœ¬æ§åˆ¶ã€‚

è€Œ **Docker Compose** æ˜¯å£°æ˜å¼çš„ï¼ˆDeclarativeï¼‰ã€‚ä½ æŠŠæƒ³è¦çš„æœåŠ¡çŠ¶æ€å†™åœ¨ `docker-compose.yml` æ–‡ä»¶é‡Œï¼š

1.  **å¯è¯»æ€§å¼º**ï¼šç»“æ„æ¸…æ™°ï¼Œå‚æ•°ä¸€ç›®äº†ç„¶ã€‚
2.  **ç‰ˆæœ¬æ§åˆ¶**ï¼šYAML æ–‡ä»¶å¯ä»¥æäº¤åˆ° Git ä»“åº“ï¼Œå˜æ›´å†å²æœ‰è¿¹å¯å¾ªã€‚
3.  **ä¸€é”®å¯åŠ¨**ï¼šæ— è®ºåœ¨å“ªé‡Œï¼Œåªéœ€ `docker-compose up -d`ï¼ŒæœåŠ¡å°±èƒ½å®Œç¾å¤ç°ã€‚

## å®æˆ˜ï¼šå¦‚ä½• 3 ç§’å®Œæˆè½¬æ¢ï¼Ÿ

æˆ‘ä»¬å†…ç½®äº†å¼ºå¤§çš„è½¬æ¢å¼•æ“ï¼Œä½ ç”šè‡³ä¸éœ€è¦æ‡‚ YAML è¯­æ³•ã€‚

### åœºæ™¯æ¼”ç¤ºï¼šéƒ¨ç½²ä¸€ä¸ª Nginx

å‡è®¾ä½ æœ‰ä¸€æ¡å¾ˆé•¿çš„å¯åŠ¨å‘½ä»¤ï¼š

```bash
docker run -d \
  --name web-server \
  -p 8080:80 \
  -v /var/www/html:/usr/share/nginx/html \
  --restart always \
  nginx:latest
```

**æ“ä½œæ­¥éª¤ï¼š**

1. å¤åˆ¶ä¸Šé¢é‚£æ®µ `docker run` å‘½ä»¤ã€‚
2. ç‚¹å‡» **[Docker Run è½¬ Docker Compose](https://888467.xyz/docker-run-to-docker-compose-converter)** è¿›å…¥å·¥å…·ã€‚
3. å°†å‘½ä»¤ç²˜è´´åˆ°å·¦ä¾§è¾“å…¥æ¡†ã€‚
4. å³ä¾§ä¼šè‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹çš„æ ‡å‡† YAMLï¼š

```yaml
version: '3.3'
services:
    nginx:
        container_name: web-server
        ports:
            - '8080:80'
        volumes:
            - '/var/www/html:/usr/share/nginx/html'
        restart: always
        image: 'nginx:latest'

```

å°±æ˜¯è¿™ä¹ˆç®€å•ï¼ç°åœ¨ä½ å¯ä»¥ç›´æ¥æŠŠå³ä¾§çš„ä»£ç ä¿å­˜ä¸º `docker-compose.yml`ï¼Œç„¶åæ‰§è¡Œ `docker-compose up -d` å³å¯ã€‚

## è¿›é˜¶æŠ€å·§

* **å¤„ç†ç¯å¢ƒå˜é‡**ï¼šå¦‚æœä½ çš„å‘½ä»¤ä¸­åŒ…å«å¤§é‡ `-e MYSQL_PASSWORD=xxx`ï¼Œè½¬æ¢å™¨ä¼šè‡ªåŠ¨å°†å…¶æ ¼å¼åŒ–ä¸º `environment` åˆ—è¡¨ï¼Œéå¸¸ä¾¿äºé˜…è¯»ã€‚
* **ç½‘ç»œæ¨¡å¼**ï¼šå¤æ‚çš„ `--net` æˆ– `--link` å‚æ•°ä¹Ÿèƒ½è¢«å®Œç¾è¯†åˆ«å¹¶è½¬æ¢ä¸º Compose çš„ç½‘ç»œé…ç½®ã€‚

> **ç«‹å³ä½“éªŒ**ï¼šğŸ‘‰ [ç‚¹å‡»è¿™é‡Œä½¿ç”¨ Docker Run åœ¨çº¿è½¬æ¢å·¥å…·](https://888467.xyz/docker-run-to-docker-compose-converter)

